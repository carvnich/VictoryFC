@model VictoryFC.Models.HomeViewModel

@{
	ViewData["Title"] = "Home Page";
}

<div class="card border shadow">
	<!-- Hero Section -->
	<div id="hero" class="card-body bg-primary text-white position-relative overflow-hidden" style="background-image: url('/images/herobg.jpg'); background-size: cover; background-position: center;">
		<div class="position-absolute top-0 start-0 w-100 h-100 bg-dark" style="opacity: 0.5;"></div>
		<div class="position-relative">
			<div class="row align-items-center h-100">
				<div class="col-lg-6">
					<div class="text-center py-4">
						@if (Model.NextMatch != null)
						{
							<h1 class="mb-4 fw-bold">@Model.NextMatch.HomeTeam vs @Model.NextMatch.AwayTeam</h1>
							<div class="d-flex justify-content-center align-items-start gap-2 mb-4" id="countdown" data-target="@Model.CountdownTarget">
								<div class="text-center"><div class="display-6 fw-bold" id="days">00</div><small class="d-block">Days</small></div>
								<div class="display-6 fw-bold">:</div>
								<div class="text-center"><div class="display-6 fw-bold" id="hours">00</div><small class="d-block">Hours</small></div>
								<div class="display-6 fw-bold">:</div>
								<div class="text-center"><div class="display-6 fw-bold" id="minutes">00</div><small class="d-block">Minutes</small></div>
								<div class="display-6 fw-bold">:</div>
								<div class="text-center"><div class="display-6 fw-bold" id="seconds">00</div><small class="d-block">Seconds</small></div>
							</div>
							<div class="mb-3">
								<p class="mb-2"><i class="bi bi-calendar me-2"></i>@Model.NextMatch.FormattedDate at @Model.NextMatch.FormattedTime</p>
								<p class="mb-2"><i class="bi bi-geo-alt me-2"></i>@Model.NextMatch.Field</p>
								<p class="mb-0"><small>@Model.NextMatchLocation</small></p>
							</div>
						}
						else
						{
							<h1 class="mb-4 fw-bold">Season Complete!</h1>
							<p class="fs-4">Thank you for your support this season!</p>
						}
					</div>
				</div>
				<div class="col-lg-6">
					<div class="p-4">
						@if (Model.NextMatch != null)
						{
							<div class="bg-white rounded shadow-sm p-2">
								<div id="map" class="rounded" style="height: 250px; width: 100%;" data-location="@Model.NextMatchLocation" data-field="@Model.NextMatch.Field"></div>
							</div>
						}
						else
						{
							<div class="bg-white rounded shadow-sm p-3">
								<h5 class="text-dark mb-3"><i class="bi bi-trophy me-2"></i>Season Stats</h5>
								<div class="row text-center text-dark">
									<div class="col-3"><div class="fw-bold fs-4 text-success">@Model.Stats.Wins</div><small>Wins</small></div>
									<div class="col-3"><div class="fw-bold fs-4 text-warning">@Model.Stats.Draws</div><small>Draws</small></div>
									<div class="col-3"><div class="fw-bold fs-4 text-vfc-red">@Model.Stats.Losses</div><small>Losses</small></div>
									<div class="col-3"><div class="fw-bold fs-4 text-primary">@Model.Stats.Points</div><small>Points</small></div>
								</div>
								<div class="mt-3 text-center text-dark">
									<div class="fw-bold">@Model.Stats.GoalsFor - @Model.Stats.GoalsAgainst</div>
									<small>Goals For - Goals Against</small>
								</div>
							</div>
						}
					</div>
				</div>
			</div>
		</div>
	</div>

	<hr class="mx-auto rounded" style="width: 90%; height: 4px; background-color: #6c757d; border: none;">

	<!-- Standings Section -->
	<div id="standings" class="card-body">
		<div class="row align-items-center mb-3">
			<div class="col-md-6">
				<h3 class="mb-2 mb-md-0">Standings</h3>
			</div>
			<div class="col-md-6">
				<div class="d-flex justify-content-md-end">
					<select class="form-select w-auto" id="division-select">
						<option value="regular" selected>Division 3</option>
						<option value="spence">Spence Cup</option>
					</select>
				</div>
			</div>
		</div>
		@Html.Partial("_StandingsTable", Model.Standings)
	</div>

	<hr class="mx-auto rounded" style="width: 90%; height: 4px; background-color: #6c757d; border: none;">

	<!-- Scorers Section -->
	<div id="scorers" class="card-body">
		<div class="row align-items-center mb-3">
			<div class="col-md-6">
				<h3 class="mb-2 mb-md-0">Scorers</h3>
			</div>
			<div class="col-md-6">
				<div class="d-flex justify-content-md-end">
					<select class="form-select w-auto" id="scorers-select">
						<option value="regular" selected>Division 3</option>
						<option value="spence">Spence Cup</option>
					</select>
				</div>
			</div>
		</div>
		<div id="scorers-container">@Html.Partial("_ScorersList", Model.RegularScorers)</div>
	</div>

	<hr class="mx-auto rounded" style="width: 90%; height: 4px; background-color: #6c757d; border: none;">

	<!-- Matches Carousel Section -->
	<div id="matches" class="card-body">
		<div class="d-flex align-items-center px-3 mb-3">
			<button class="carousel-nav-btn" type="button" data-bs-target="#matchesCarousel" data-bs-slide="prev">
				<i class="bi bi-chevron-left"></i>
			</button>
			<h3 class="mb-0 text-center flex-grow-1">Matches</h3>
			<button class="carousel-nav-btn" type="button" data-bs-target="#matchesCarousel" data-bs-slide="next">
				<i class="bi bi-chevron-right"></i>
			</button>
		</div>

		<div id="matchesCarousel" class="carousel slide" data-bs-ride="false">
			<div class="carousel-inner" id="matches-carousel-inner">
				<!-- Carousel items will be populated by JavaScript -->
			</div>
			<div class="carousel-indicators position-relative" id="matches-carousel-indicators">
				<!-- Indicators will be populated by JavaScript -->
			</div>
		</div>

		<div class="text-center py-3 mt-2">
			<a asp-controller="Match" asp-action="Index" class="vfc-button">
				View All Matches
			</a>
		</div>
	</div>

	<hr class="mx-auto rounded" style="width: 90%; height: 4px; background-color: #6c757d; border: none;">

	<!-- Shop Section -->
	<div id="shop" class="card-body">
		<h3 class="mb-4">
			<img src="~/images/gear/manrocketlogo.png" alt="Man Rocket Logo" height="55" class="rounded-circle me-2" />Shop
		</h3>
		<div class="row g-3">
			@foreach (var item in Model.ShopItems)
			{
				<div class="col-6 col-md-4 col-lg-3">
					<a href="@item.Url" target="_blank" class="text-decoration-none">
						<div class="card border shadow-sm h-100 shop-item-card">
							<div class="d-flex align-items-center justify-content-center p-3" style="min-height:120px;">
								<img src="@item.Image" alt="@item.Name" class="img-fluid" style="max-height:100px;" />
							</div>
							<div class="card-body text-center p-2">
								<h6 class="card-title mb-1 small">@item.Name</h6>
								<p class="text-muted small mb-1">@item.Description</p>
								<p class="fw-bold text-vfc-red mb-0">@item.Price</p>
							</div>
						</div>
					</a>
				</div>
			}
		</div>
	</div>
</div>

<script>
	// Pass matches data to global scope for carousel
	window.matchesData = @Html.Raw(Json.Serialize(Model.AllMatches));
</script>